<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nossos Textos</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="header">
    <h1>💌 Para o Amor da Minha Vida 💌</h1>
    <p>Cada palavra escrita é um pedacinho da minha alma que eu sempre propus a te entregar!</p>
  </header>

  <main class="container">
    <div class="grid" id="cards-container">
      <!-- Cards vão ser inseridos aqui -->
    </div>

    <div class="music-box">
      <p class="cit">
        E a nossa música eterna, que eu tanto amo ouvir com você do meu lado ❤️
      </p>
      <iframe width="240" height="240" src="https://www.youtube.com/embed/_Paw8ZRSlqY?autoplay=1&loop=1&playlist=_Paw8ZRSlqY" frameborder="0"></iframe>
    </div>
  </main>

  <footer class="footer">
    <p>Feito com ❤️ só para você evy!.</p>
  </footer>

 <script>
    function parseCSV(text) {
      const linhas = text.split("\n").filter(l => l.trim() !== "");
      const dados = linhas.map(linha => {
        const regex = /(?:\"([^\"]*)\")|([^,]+)/g;
        const resultado = [];
        let match;
        while ((match = regex.exec(linha)) !== null) {
          resultado.push(match[1] !== undefined ? match[1] : match[2]);
        }
        return resultado;
      });
      return dados;
    }

    async function carregarCards() {
      const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQqfAsgAVNog4YfI1rx104HGmPvy5EX6xGc9Jt8hhprLght6AC4qkEpXp5X3uDIgECTo1cTMXM50mZ_/pub?output=csv";
      try {
        const res = await fetch(csvUrl);
        if (!res.ok) throw new Error("Erro ao carregar CSV: " + res.status);
        const csvText = await res.text();

        const dados = parseCSV(csvText);
        const container = document.getElementById("cards-container");

        // Ignora a primeira linha (cabeçalho)
        dados.slice(1).forEach((linha, index) => {
          const titulo = linha[1] || "Sem título";
          const resumo = linha[2] || "";

          const card = document.createElement("a");
          card.className = "card";
          card.href = `texto.html?id=${index}`;
          card.innerHTML = `<h2>${titulo}</h2><p>${resumo}</p>`; // mostra só título e resumo
          container.appendChild(card);
        });
      } catch (err) {
        console.error(err);
      }
    }

    carregarCards();
      </script>
</body>
</html>


