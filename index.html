<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nossos Textos</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="header">
    <h1>üíå Para o Amor da Minha Vida üíå</h1>
    <p>Cada palavra escrita √© um pedacinho da minha alma que eu sempre propus a te entregar!</p>
  </header>

  <main class="container">
    <div class="grid" id="cards-container">
      <!-- Cards v√£o ser inseridos aqui -->
    </div>

    <div class="music-box">
      <p class="cit">
        E a nossa m√∫sica eterna, que eu tanto amo ouvir com voc√™ do meu lado ‚ù§Ô∏è
      </p>
      <iframe width="240" height="240" src="https://www.youtube.com/embed/_Paw8ZRSlqY?autoplay=1&loop=1&playlist=_Paw8ZRSlqY" frameborder="0"></iframe>
    </div>
  </main>

  <footer class="footer">
    <p>Feito com ‚ù§Ô∏è s√≥ para voc√™ evy!.</p>
  </footer>

<script>
async function carregarCards() {
  const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQqfAsgAVNog4YfI1rx104HGmPvy5EX6xGc9Jt8hhprLght6AC4qkEpXp5X3uDIgECTo1cTMXM50mZ_/pub?output=csv";

  // Fun√ß√£o para separar CSV em linhas corretas, respeitando quebras dentro de aspas
  function parseCSVRows(csvText) {
    const rows = [];
    let current = '';
    let dentroAspas = false;

    for (let i = 0; i < csvText.length; i++) {
      const char = csvText[i];

      if (char === '"') {
        dentroAspas = !dentroAspas;
        current += char;
      } else if (char === '\n' && !dentroAspas) {
        rows.push(current);
        current = '';
      } else {
        current += char;
      }
    }
    if (current) rows.push(current);
    return rows;
  }

  // Fun√ß√£o para separar colunas de uma linha, respeitando v√≠rgulas dentro de aspas
  function parseCSVColumns(row) {
    const cols = [];
    let current = '';
    let dentroAspas = false;

    for (let i = 0; i < row.length; i++) {
      const char = row[i];

      if (char === '"') {
        dentroAspas = !dentroAspas;
      } else if (char === ',' && !dentroAspas) {
        cols.push(current);
        current = '';
        continue;
      }
      current += char;
    }
    cols.push(current);
    return cols.map(v => v.replace(/^"(.*)"$/,'$1')); // remove aspas externas
  }

  try {
    const res = await fetch(csvUrl);
    if (!res.ok) throw new Error("Erro ao carregar CSV: " + res.status);
    const csvText = await res.text();

    const linhas = parseCSVRows(csvText).filter(l => l.trim() !== "");
    const container = document.getElementById("cards-container");


    // Adiciona cards do CSV
    linhas.slice(1).forEach((linha, index) => {
  if (index === 9) {
    // cria o card especial
    const cardEspecial = document.createElement("a");
    cardEspecial.href = "html/aniversario10.html";
    cardEspecial.className = "card highlight";
    cardEspecial.innerHTML = `
      <h2 id="dez"><b>10¬∞ Anivers√°rio</b></h2>
      <p>Meu amor, finalmente atingimos 10 meses...</p>
    `;
    container.appendChild(cardEspecial);
  } else {
    // cria card normal
    const colunas = parseCSVColumns(linha);
    const titulo = colunas[1] || "Sem t√≠tulo";
    const subtitulo = colunas[2] || "";

    const card = document.createElement("a");
    card.className = "card";
    card.href = `texto.html?id=${index}`;
    card.innerHTML = `<h2>${titulo}</h2><p>${subtitulo}</p>`;
    container.appendChild(card);
  }
});

  } catch (err) {
    console.error(err);
  }
}

carregarCards();
</script>
</body>
</html>











